(this.webpackJsonptest_app=this.webpackJsonptest_app||[]).push([[0],{13:function(e,t,n){e.exports={header:"Header_header__3y_YB",title:"Header_title__2RHMX",linkWrapper:"Header_linkWrapper__17FaT",block:"Header_block__2G6o8",login:"Header_login__1P7N6"}},16:function(e,t,n){e.exports={wrapper:"Login_wrapper__2CuEe",forms:"Login_forms__1TuYR",form:"Login_form__3O7bN",button:"Login_button__166ZS"}},19:function(e,t,n){e.exports={wrapper:"Post_wrapper__3wXfg",title:"Post_title__T1_V6",content:"Post_content__4L5F1"}},22:function(e,t,n){e.exports={app:"App_app__3DjjN",wrapper:"App_wrapper__1ApzO"}},38:function(e,t,n){e.exports={wrapper:"Main_wrapper__2ImUd"}},39:function(e,t,n){e.exports={wrapper:"Profile_wrapper__1s84i"}},43:function(e,t,n){e.exports={wrapper:"Posts_wrapper__3jfxo"}},45:function(e,t,n){e.exports={footer:"Footer_footer__zdS_v"}},47:function(e,t,n){e.exports=n(79)},52:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(17),c=n.n(o),i=(n(52),n(6)),s=n(7),l=n(9),u=n(8),p=n(10),m=n(22),f=n.n(m),h=n(14),E=n(38),b=n.n(E),d=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement("video",{style:{width:"200px",height:"200px"},ref:this.props.refer},a.a.createElement("source",{src:"https://media.w3.org/2010/05/sintel/trailer_hd.mp4"}))}}]),t}(r.Component),g=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).play=function(){n.video.current.play()},n.video=a.a.createRef(),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(d,{refer:this.video}),a.a.createElement("button",{onClick:this.play},"Play"))}}]),t}(r.Component),O=function(e){return a.a.createElement("section",{className:b.a.wrapper},a.a.createElement("h1",null,"\u0417\u0410\u0413\u041e\u041b\u041e\u0412\u041e\u041a"),a.a.createElement("p",null,"\u0417\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0433\u043b\u0430\u0432\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430."),a.a.createElement(g,null))},_=n(39),v=n.n(_),P=n(3),j=Object(P.b)((function(e){return{isAuthentication:e.authentication.isAuthentication}}),null)((function(e){return e.isAuthentication?a.a.createElement("section",{className:v.a.wrapper},a.a.createElement("b",null,"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"),a.a.createElement("p",null,"\u0417\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043f\u0440\u043e\u0444\u0438\u043b\u044f.")):a.a.createElement(h.a,{to:"/login"})})),y=n(43),w=n.n(y),A=n(19),T=n.n(A),N=function(e){return a.a.createElement("div",{className:T.a.wrapper},a.a.createElement("div",{className:T.a.title},a.a.createElement("h3",null,e.title)),a.a.createElement("div",{className:T.a.content},a.a.createElement("p",null,e.content)))},k=n(27),S=n(18),C=n(44),x=function(e){return Promise.resolve(localStorage.setItem("token",e))},I=function(){return Promise.resolve(localStorage.getItem("token"))},L=n.n(C).a.create({baseURL:"https://jsonplaceholder.typicode.com/"});L.interceptors.request.use((function(e){return e.headers.token=I(),e}));var D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return L.get("posts?_page=".concat(e)).then((function(e){return e.data}))};function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(n,!0).forEach((function(t){Object(S.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M="TEST-APP/NEXT_PAGE",U="TEST-APP/LOADING",W={posts:[],postsPage:1,isLoading:!1},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TEST-APP/MOUNT-POSTS":return R({},e,{posts:[].concat(Object(k.a)(e.posts),Object(k.a)(t.posts))});case M:return R({},e,{postsPage:e.postsPage+1});case U:return R({},e,{isLoading:t.loading});default:return e}},X=function(){return{type:M}},B=function(e){return{type:U,loading:e}},F=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).onScroll=function(e){var t=e.currentTarget;t.offsetHeight+Math.ceil(t.scrollTop)>=t.scrollHeight&&n.props.getPosts(n.props.postsPage)},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.getPosts(this.props.postsPage)}},{key:"render",value:function(e){var t=this.props.posts.map((function(e){return a.a.createElement(N,{key:e.id+Math.random(),title:e.title,content:e.body})}));return a.a.createElement("section",{className:w.a.wrapper},a.a.createElement("div",{onScroll:this.onScroll,style:{position:"absolute",height:"100%",overflowY:"scroll",width:"100%"}},t))}}]),t}(r.Component),G=Object(P.b)((function(e){return{posts:e.posts.posts,postsPage:e.posts.postsPage}}),{getPosts:function(e){return function(t,n){n().posts.isLoading||(t(B(!0)),D(e).then((function(e){t(function(e){return{type:"TEST-APP/MOUNT-POSTS",posts:e}}(e)),t(X()),t(B(!1))})))}},nextPage:X})(F),Y=n(16),J=n.n(Y),q=function(e,t){return"Admin"===e&&"111111"===t?Promise.resolve({token:"valid_token",result:0,username:"Admin"}):Promise.resolve({result:401,token:null,username:""})},V=function(){return Promise.resolve({result:0,token:null})};function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(n,!0).forEach((function(t){Object(S.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K={isAuthentication:!1,authenticationError:!1,username:""},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TEST-APP/SET_AUTHENTICATION":return $({},e,{isAuthentication:t.isAuthentication});case"TEST-APP/AUTHENTICATION_ERROR":return $({},e,{authenticationError:t.authenticationError});case"TEST-APP/SET_USERNAME":return $({},e,{username:t.username});default:return e}},ee=function(e){return{type:"TEST-APP/SET_AUTHENTICATION",isAuthentication:e}},te=function(e){return{type:"TEST-APP/SET_USERNAME",username:e}},ne=function(e){return{type:"TEST-APP/AUTHENTICATION_ERROR",authenticationError:e}},re=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={login:"",password:""},n.onLoginChanged=function(e){n.props.falseAuthentication(!1),n.setState({login:e.currentTarget.value})},n.onPasswordChanged=function(e){n.props.falseAuthentication(!1),n.setState({password:e.currentTarget.value})},n.onSubmit=function(){n.props.login(n.state.login,n.state.password),n.setState({login:"",password:""})},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.props.isAuthentication?a.a.createElement(h.a,{to:"/profile"}):a.a.createElement("div",{className:J.a.wrapper},a.a.createElement("h2",null,"\u0424\u043e\u0440\u043c\u0430 \u0432\u0445\u043e\u0434\u0430"),a.a.createElement("div",{className:J.a.forms},a.a.createElement("div",{className:J.a.form},a.a.createElement("span",null,"\u041b\u043e\u0433\u0438\u043d: "),a.a.createElement("input",{type:"login",placeholder:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",value:this.state.login,onChange:this.onLoginChanged})),a.a.createElement("div",{className:J.a.form},a.a.createElement("span",null,"\u041f\u0430\u0440\u043e\u043b\u044c: "),a.a.createElement("input",{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:this.state.password,onChange:this.onPasswordChanged})),this.props.authenticationError&&a.a.createElement("mark",null,"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u0432\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435 \u0432\u0435\u0440\u043d\u043e."),a.a.createElement("button",{className:J.a.button,onClick:this.onSubmit},"\u0412\u043e\u0439\u0442\u0438")))}}]),t}(a.a.Component),ae=Object(P.b)((function(e){return{isAuthentication:e.authentication.isAuthentication,authenticationError:e.authentication.authenticationError}}),{login:function(e,t){return function(n){q(e,t).then((function(e){return 0===e.result?(x(e.token),n(ee(!0)),n(te(e.username)),e):(n(ne(!0)),e)}))}},falseAuthentication:ne})(re),oe=n(13),ce=n.n(oe),ie=n(11),se=Object(P.b)((function(e){return{username:e.authentication.username,isAuthentication:e.authentication.isAuthentication}}),{logout:function(){return function(e){V().then((function(t){0===t.result?x(t.token).then((function(){return e(ee(!1)),e(te("")),t})):console.log("Logout Error")}))}}})((function(e){return a.a.createElement("header",{className:ce.a.header},a.a.createElement("span",{className:ce.a.title}," Test APP "),a.a.createElement("ul",{className:ce.a.linkWrapper},a.a.createElement("li",{className:ce.a.block},a.a.createElement(ie.b,{to:"/ "},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f")),a.a.createElement("li",{className:ce.a.block},a.a.createElement(ie.b,{to:"/posts"},"\u041d\u043e\u0432\u043e\u0441\u0442\u0438")),a.a.createElement("li",{className:ce.a.block},a.a.createElement(ie.b,{to:"/profile"},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"))),a.a.createElement("span",{className:ce.a.login},a.a.createElement("span",null,e.username),e.isAuthentication&&a.a.createElement("button",{className:ce.a.button,onClick:e.logout},"X")))})),le=n(45),ue=n.n(le),pe=function(e){return a.a.createElement("header",{className:ue.a.footer},a.a.createElement("footer",null,"(c)"))},me=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.checkAuthorization()}},{key:"render",value:function(e){return a.a.createElement("div",{className:f.a.app},a.a.createElement(se,null),a.a.createElement("div",{className:f.a.wrapper},a.a.createElement(h.b,{path:"/ ",component:function(){return a.a.createElement(O,null)}}),a.a.createElement(h.b,{path:"/posts",component:function(){return a.a.createElement(G,null)}}),a.a.createElement(h.b,{path:"/profile",component:function(){return a.a.createElement(j,null)}}),a.a.createElement(h.b,{path:"/login",component:function(){return a.a.createElement(ae,null)}})),a.a.createElement(pe,null))}}]),t}(r.Component),fe=Object(P.b)(null,{checkAuthorization:function(){return function(e){I().then((function(t){"null"!==t?(e(ee(!0)),e(te("Admin"))):(e(ee(!1)),e(te("")))}))}}})(me);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var he=n(15),Ee=n(46),be=Object(he.c)({authentication:Q,posts:z}),de=Object(he.d)(be,Object(he.a)(Ee.a));c.a.render(a.a.createElement(ie.a,{basename:"/authentication"},a.a.createElement(P.a,{store:de},a.a.createElement(fe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[47,1,2]]]);
//# sourceMappingURL=main.ef8880b3.chunk.js.map