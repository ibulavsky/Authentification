(this.webpackJsonptest_app=this.webpackJsonptest_app||[]).push([[0],{16:function(e,t,n){e.exports={wrapper:"Login_wrapper__2CuEe",forms:"Login_forms__1TuYR",form:"Login_form__3O7bN",button:"Login_button__166ZS"}},19:function(e,t,n){e.exports={wrapper:"Post_wrapper__3wXfg",title:"Post_title__T1_V6",content:"Post_content__4L5F1"}},22:function(e,t,n){e.exports={app:"App_app__3DjjN",wrapper:"App_wrapper__1ApzO"}},38:function(e,t,n){e.exports={wrapper:"Main_wrapper__2ImUd"}},39:function(e,t,n){e.exports={wrapper:"Profile_wrapper__1s84i"}},43:function(e,t,n){e.exports={wrapper:"Posts_wrapper__3jfxo"}},45:function(e,t,n){e.exports={footer:"Footer_footer__zdS_v"}},47:function(e,t,n){e.exports=n(79)},52:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(17),c=n.n(o),i=(n(52),n(10)),s=n(11),l=n(13),u=n(12),p=n(14),m=n(22),f=n.n(m),h=n(9),E=n(38),b=n.n(E),g=function(e){return a.a.createElement("section",{className:b.a.wrapper},a.a.createElement("h1",null,"\u0417\u0410\u0413\u041e\u041b\u041e\u0412\u041e\u041a"),a.a.createElement("p",null,"\u0417\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0433\u043b\u0430\u0432\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430."))},d=n(39),O=n.n(d),_=n(3),P=Object(_.b)((function(e){return{isAuthentication:e.authentication.isAuthentication}}),null)((function(e){return e.isAuthentication?a.a.createElement("section",{className:O.a.wrapper},a.a.createElement("b",null,"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"),a.a.createElement("p",null,"\u0417\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043f\u0440\u043e\u0444\u0438\u043b\u044f.")):a.a.createElement(h.a,{to:"/login"})})),v=n(43),w=n.n(v),j=n(19),y=n.n(j),A=function(e){return a.a.createElement("div",{className:y.a.wrapper},a.a.createElement("div",{className:y.a.title},a.a.createElement("h3",null,e.title)),a.a.createElement("div",{className:y.a.content},a.a.createElement("p",null,e.content)))},T=n(27),N=n(18),S=n(44),k=function(e){return Promise.resolve(localStorage.setItem("token",e))},C=function(){return Promise.resolve(localStorage.getItem("token"))},I=n.n(S).a.create({baseURL:"https://jsonplaceholder.typicode.com/"});I.interceptors.request.use((function(e){return e.headers.token=C(),e}));var L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return I.get("posts?_page=".concat(e)).then((function(e){return e.data}))};function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach((function(t){Object(N.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x="TEST-APP/NEXT_PAGE",R="TEST-APP/LOADING",M={posts:[],postsPage:1,isLoading:!1},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TEST-APP/MOUNT-POSTS":return H({},e,{posts:[].concat(Object(T.a)(e.posts),Object(T.a)(t.posts))});case x:return H({},e,{postsPage:e.postsPage+1});case R:return H({},e,{isLoading:t.loading});default:return e}},W=function(){return{type:x}},z=function(e){return{type:R,loading:e}},X=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).onScroll=function(e){var t=e.currentTarget;t.offsetHeight+Math.ceil(t.scrollTop)>=t.scrollHeight&&n.props.getPosts(n.props.postsPage)},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.getPosts(this.props.postsPage)}},{key:"render",value:function(e){var t=this.props.posts.map((function(e){return a.a.createElement(A,{key:e.id+Math.random(),title:e.title,content:e.body})}));return a.a.createElement("section",{className:w.a.wrapper},a.a.createElement("div",{onScroll:this.onScroll,style:{position:"absolute",height:"100%",overflowY:"scroll",width:"100%"}},t))}}]),t}(r.Component),B=Object(_.b)((function(e){return{posts:e.posts.posts,postsPage:e.posts.postsPage}}),{getPosts:function(e){return function(t,n){n().posts.isLoading||(t(z(!0)),L(e).then((function(e){t(function(e){return{type:"TEST-APP/MOUNT-POSTS",posts:e}}(e)),t(W()),t(z(!1))})))}},nextPage:W})(X),F=n(16),G=n.n(F),Y=function(e,t){return"Admin"===e&&"111111"===t?Promise.resolve({token:"valid_token",result:0,username:"Admin"}):Promise.resolve({result:401,token:null,username:""})},J=function(){return Promise.resolve({result:0,token:null})};function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(n,!0).forEach((function(t){Object(N.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z={isAuthentication:!1,authenticationError:!1,username:""},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TEST-APP/SET_AUTHENTICATION":return V({},e,{isAuthentication:t.isAuthentication});case"TEST-APP/AUTHENTICATION_ERROR":return V({},e,{authenticationError:t.authenticationError});case"TEST-APP/SET_USERNAME":return V({},e,{username:t.username});default:return e}},K=function(e){return{type:"TEST-APP/SET_AUTHENTICATION",isAuthentication:e}},Q=function(e){return{type:"TEST-APP/SET_USERNAME",username:e}},ee=function(e){return{type:"TEST-APP/AUTHENTICATION_ERROR",authenticationError:e}},te=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={login:"",password:""},n.onLoginChanged=function(e){n.props.falseAuthentication(!1),n.setState({login:e.currentTarget.value})},n.onPasswordChanged=function(e){n.props.falseAuthentication(!1),n.setState({password:e.currentTarget.value})},n.onSubmit=function(){n.props.login(n.state.login,n.state.password),n.setState({login:"",password:""})},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.props.isAuthentication?a.a.createElement(h.a,{to:"/profile"}):a.a.createElement("div",{className:G.a.wrapper},a.a.createElement("h2",null,"\u0424\u043e\u0440\u043c\u0430 \u0432\u0445\u043e\u0434\u0430"),a.a.createElement("div",{className:G.a.forms},a.a.createElement("div",{className:G.a.form},a.a.createElement("span",null,"\u041b\u043e\u0433\u0438\u043d: "),a.a.createElement("input",{type:"login",placeholder:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",value:this.state.login,onChange:this.onLoginChanged})),a.a.createElement("div",{className:G.a.form},a.a.createElement("span",null,"\u041f\u0430\u0440\u043e\u043b\u044c: "),a.a.createElement("input",{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:this.state.password,onChange:this.onPasswordChanged})),this.props.authenticationError&&a.a.createElement("mark",null,"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u0432\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435 \u0432\u0435\u0440\u043d\u043e."),a.a.createElement("button",{className:G.a.button,onClick:this.onSubmit},"\u0412\u043e\u0439\u0442\u0438")))}}]),t}(a.a.Component),ne=Object(_.b)((function(e){return{isAuthentication:e.authentication.isAuthentication,authenticationError:e.authentication.authenticationError}}),{login:function(e,t){return function(n){Y(e,t).then((function(e){return 0===e.result?(k(e.token),n(K(!0)),n(Q(e.username)),e):(n(ee(!0)),e)}))}},falseAuthentication:ee})(te),re=n(8),ae=n.n(re),oe=n(6),ce=Object(_.b)((function(e){return{username:e.authentication.username,isAuthentication:e.authentication.isAuthentication}}),{logout:function(){return function(e){J().then((function(t){0===t.result?k(t.token).then((function(){return e(K(!1)),e(Q("")),t})):console.log("Logout Error")}))}}})((function(e){return a.a.createElement("header",{className:ae.a.header},a.a.createElement("span",{className:ae.a.title}," Test APP "),a.a.createElement("ul",{className:ae.a.linkWrapper},a.a.createElement("li",{className:ae.a.block},a.a.createElement(oe.b,{to:"/ "},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f")),a.a.createElement("li",{className:ae.a.block},a.a.createElement(oe.b,{to:"/posts"},"\u041d\u043e\u0432\u043e\u0441\u0442\u0438")),a.a.createElement("li",{className:ae.a.block},a.a.createElement(oe.b,{to:"/profile"},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"))),a.a.createElement("span",{className:ae.a.login},a.a.createElement("span",null,e.username),e.isAuthentication&&a.a.createElement("button",{className:ae.a.button,onClick:e.logout},"X")))})),ie=n(45),se=n.n(ie),le=function(e){return a.a.createElement("header",{className:se.a.footer},a.a.createElement("footer",null,"(c)"))},ue=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.checkAuthorization()}},{key:"render",value:function(e){return a.a.createElement("div",{className:f.a.app},a.a.createElement(ce,null),a.a.createElement("div",{className:f.a.wrapper},a.a.createElement(h.b,{path:"/ ",component:function(){return a.a.createElement(g,null)}}),a.a.createElement(h.b,{path:"/posts",component:function(){return a.a.createElement(B,null)}}),a.a.createElement(h.b,{path:"/profile",component:function(){return a.a.createElement(P,null)}}),a.a.createElement(h.b,{path:"/login",component:function(){return a.a.createElement(ne,null)}})),a.a.createElement(le,null))}}]),t}(r.Component),pe=Object(_.b)(null,{checkAuthorization:function(){return function(e){C().then((function(t){"null"!==t?(e(K(!0)),e(Q("Admin"))):(e(K(!1)),e(Q("")))}))}}})(ue);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var me=n(15),fe=n(46),he=Object(me.c)({authentication:$,posts:U}),Ee=Object(me.d)(he,Object(me.a)(fe.a));c.a.render(a.a.createElement(oe.a,{basename:"/authentication"},a.a.createElement(_.a,{store:Ee},a.a.createElement(pe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},8:function(e,t,n){e.exports={header:"Header_header__3y_YB",title:"Header_title__2RHMX",linkWrapper:"Header_linkWrapper__17FaT",block:"Header_block__2G6o8",login:"Header_login__1P7N6"}}},[[47,1,2]]]);
//# sourceMappingURL=main.9c882ed6.chunk.js.map